{"data":{"markdownRemark":{"html":"<p>I have a SOAP based web service that I wrote when ColdFusion MX 6 first came out, and it does not work in BlueDragon.NET.</p>\n<p>The web service is called a quote from Mr. Spock. (Yes, I am a GEEK.) It has a one method called getQuote which returns a coldFusion structure or a HashMap object if you are using Java. When I test my client for the web service in BlueDragon, it retuned an empty object. So I decided to rewrite my web service code to return a simple object instead. My current cfc for the web service looks like this;</p>\n<div class=\"code\"><font color=\"MAROON\"><cfcomponent displayName=<font color=\"BLUE\">\"spock\"</font>></font>  \n<p> <font color=\"MAROON\">&#x3C;cffunction access=<font color=\"BLUE\">\"private\"</font> name=<font color=\"BLUE\">\"getRand\"</font> returntype=<font color=\"BLUE\">\"numeric\"</font>></font>  </p>\n<p> <font color=\"MAROON\">&#x3C;cfset randNum = randrange(<font color=\"BLUE\">1</font>,<font color=\"BLUE\">85</font>)></font>  </p>\n<p> <font color=\"MAROON\"><cfreturn randNum /></font>  </p>\n<p> <font color=\"MAROON\"></cffunction></font>  </p>\n<p> <font color=\"MAROON\">&#x3C;cffunction access=<font color=\"BLUE\">\"Remote\"</font> name=<font color=\"BLUE\">\"getQuote\"</font> returntype=<font color=\"BLUE\">\"struct\"</font> hint=<font color=\"BLUE\">\"Get Quote from Mr. Spock\"</font>></font>  </p>\n<p> <font color=\"MAROON\">&#x3C;cfquery name=<font color=\"BLUE\">\"myQuoteQuery\"</font> datasource=<font color=\"BLUE\">\"#application.davidsDSN#\"</font>></font>  </p>\n<p> Select * From SpockQuotes  </p>\n<p> WHere QuoteNum = #getRand()#;  </p>\n<p> <font color=\"MAROON\"></cfquery></font>  </p>\n<p> <font color=\"MAROON\"><cfset spock = structnew()></font>  </p>\n<p> <font color=\"MAROON\"><cfset spock.quote = trim(myQuoteQuery.quote)></font>  </p>\n<p> <font color=\"MAROON\"><cfset spock.Episode = myQuoteQuery.episode></font>  </p>\n<p> <font color=\"MAROON\"><cfset spock.stardate = myQuoteQuery.stardate></font>  </p>\n<p> <font color=\"MAROON\"><cfreturn spock /></font>  </p>\n<p> <font color=\"MAROON\"></cffunction></font>  </p>\n<p><font color=\"MAROON\"></cfcomponent></font></p>\n</div>\nColdFusion MX has a built in way to describe simple objects in the WSDL file. If you create another cfc using the cfproperty tag, you can return that type in the web service.\n<p>My structure has three name/value pairs for the quote, stardate and episode. The values are all of type string. So the following cfc that describes the simple object looks like this;</p>\n<div class=\"code\"><font color=\"MAROON\"><cfcomponent displayname=<font color=\"BLUE\">\"SpockQuoteModel\"</font>></font>  \n<p> <font color=\"MAROON\">&#x3C;cfproperty name=<font color=\"BLUE\">\"quote\"</font> type=<font color=\"BLUE\">\"string\"</font> /></font><br>\n<font color=\"MAROON\">&#x3C;cfproperty name=<font color=\"BLUE\">\"episode\"</font> type=<font color=\"BLUE\">\"string\"</font> /></font><br>\n<font color=\"MAROON\">&#x3C;cfproperty name=<font color=\"BLUE\">\"stardate\"</font> type=<font color=\"BLUE\">\"string\"</font> /></font>  </p>\n<p> <font color=\"MAROON\"></cfcomponent></font></div>\nThen I wrote a new web service code that uses this cfc;</p>\n<div class=\"code\"><font color=\"MAROON\"><cfcomponent displayName=<font color=\"BLUE\">\"SpockWS\"</font>></font>  \n<p> <font color=\"MAROON\">&#x3C;cffunction access=<font color=\"BLUE\">\"private\"</font> name=<font color=\"BLUE\">\"getRand\"</font> returntype=<font color=\"BLUE\">\"numeric\"</font>></font><br>\n<font color=\"MAROON\">&#x3C;cfset randNum = randrange(<font color=\"BLUE\">1</font>,<font color=\"BLUE\">85</font>)></font><br>\n<font color=\"MAROON\"><cfreturn randNum /></font><br>\n<font color=\"MAROON\"></cffunction></font>  </p>\n<p> <font color=\"MAROON\">&#x3C;cffunction access=<font color=\"BLUE\">\"Remote\"</font> name=<font color=\"BLUE\">\"getQuote\"</font> returntype=<font color=\"BLUE\">\"SpockQuoteModel\"</font> hint=<font color=\"BLUE\">\"Get Quote from Mr. Spock\"</font>></font><br>\n<font color=\"MAROON\">&#x3C;cfquery name=<font color=\"BLUE\">\"myQuoteQuery\"</font> datasource=<font color=\"BLUE\">\"#application.davidsDSN#\"</font>></font><br>\nSELECT quote, episode, stardate<br>\nFROM SpockQuotes<br>\nWHERE QuoteNum = <font color=\"MAROON\">&#x3C;cfqueryparam cfsqltype=<font color=\"BLUE\">\"cf<em>sql</em>integer\"</font> value=<font color=\"BLUE\">\"#getRand()#\"</font> /></font>;<br>\n<font color=\"MAROON\"></cfquery></font><br>\n<font color=\"MAROON\">&#x3C;cfset spock = createObject(<font color=\"BLUE\">\"component\"</font>,<font color=\"BLUE\">\"SpockQuoteModel\"</font>) /></font><br>\n<font color=\"MAROON\"><cfset spock.quote = trim(myQuoteQuery.quote) /></font><br>\n<font color=\"MAROON\"><cfset spock.Episode = myQuoteQuery.episode /></font><br>\n<font color=\"MAROON\"><cfset spock.stardate = myQuoteQuery.stardate /></font><br>\n<font color=\"MAROON\"><cfreturn spock /></font><br>\n<font color=\"MAROON\"></cffunction></font>  </p>\n<p> <font color=\"MAROON\"></cfcomponent></font></div>\nI tested this in BlueDragon.NET with the following client code;</p>\n<div class=\"code\"><font color=\"MAROON\"><cfinvoke   \n webservice=<font color=\"BLUE\">\"[http://www.fekke.com/com/SpockWS.cfc?wsdl](http://www.fekke.com/com/SpockWS.cfc?wsdl)\"</font>  \n method=<font color=\"BLUE\">\"getQuote\"</font>  \n returnvariable=<font color=\"BLUE\">\"aHashMap\"</font>></font>  \n <font color=\"MAROON\"></cfinvoke></font>  \n<p> <font color=\"MAROON\"><cfoutput></font><br>\nQuote: <font color=\"BLUE\">\"#aHashMap.quote#\"</font><font color=\"NAVY\"><br /></font><br>\nEpisode Name: <font color=\"NAVY\"><strong></font>#aHashMap.episode#<font color=\"NAVY\"></strong></font><font color=\"NAVY\"><br /></font><br>\nStardate: <font color=\"NAVY\"><em></font>#aHashMap.stardate#<font color=\"NAVY\"></em></font><font color=\"NAVY\"><br /></font><br>\n<font color=\"MAROON\"></cfoutput></font></div>\nIt Worked!!! I will copy this sample code to my web site with instructions soon.</p>","frontmatter":{"title":"Quote Service not working on BlueDragon.NET","date":"17.01.2011","category":"Blog"},"timeToRead":2}},"pageContext":{"slug":"/quote-service-not-working-on-blue-dragon-net","prev":{"fields":{"slug":"/sql-saturday-jacksonville-schedule-posted"},"frontmatter":{"title":"SQL Saturday Jacksonville Schedule Posted","category":"Blog"}},"next":{"fields":{"slug":"/sap-abap-will-not-generate-proxy-to-cold-fusion-soap-web-service"},"frontmatter":{"title":"SAP ABAP will not generate Proxy to ColdFusion SOAP Web Service","category":"Blog"}}}}
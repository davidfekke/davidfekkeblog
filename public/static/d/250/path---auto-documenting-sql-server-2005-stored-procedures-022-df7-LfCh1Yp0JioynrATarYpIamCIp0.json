{"data":{"markdownRemark":{"html":"<p>One of the features I like most about ColdFusion 8 is the cfdbinfo tag. The cfdbinfo tag allows developers to view database meta information such as tables, columns and data types. Another nice thing about the cfdbinfo tag is that it will work with most RDBMS servers.</p>\n<p>Each database server, whether it is Oracle, MySql or MS SQL Server, all have different ways of getting this meta information. CFDBINFO gives ColdFusion developers a nice level of abstraction from these different ways of accessing meta information. I am currently trying to document all of the stored procedures I wrote for a project I just finished. I decided I wanted to try to automate this task, so I wrote ColdFusion script to list my stored procedures. The following code shows how you can use the cfdbinfo tag to list all of your stored procedures.</p>\n<p>[code:c#]</p>\n<p>[/code]></p>\n<p>This may be enough information for some users, but I also wanted to display all of the input and output parameters as well as the code in the procedure as well.</p>\n<p>I work with SQL Server 2005 as my primary database engine. All of the database meta information can be accessed through system views known as INFORMATION<em>SCHEMAs. There are two views that I used to get the information about my procedures that I wanted. They are the INFORMATION</em>SCHEMA.ROUTINES and INFORMATION_SCHEMA.PARAMETERS views.</p>\n<p>I used the following query to get the meta information that I needed for my documentation;</p>\n<p>[code:c#]</p>\n<p>SELECT r.SPECIFIC<em>SCHEMA, r.SPECIFIC</em>NAME, r.ROUTINE_DEFINITION,</p>\n<p>p.ORDINAL<em>POSITION, p.PARAMETER</em>MODE, p.PARAMETER<em>NAME, p.DATA</em>TYPE</p>\n<p>FROM INFORMATION_SCHEMA.ROUTINES r</p>\n<p>JOIN INFORMATION_SCHEMA.PARAMETERS p</p>\n<p>ON r.SPECIFIC<em>SCHEMA = p.SPECIFIC</em>SCHEMA</p>\n<p>AND r.SPECIFIC<em>NAME = p.SPECIFIC</em>NAME</p>\n<p>WHERE r.ROUTINE_TYPE = 'PROCEDURE'</p>\n<p>ORDER BY r.SPECIFIC<em>SCHEMA, r.SPECIFIC</em>NAME, p.ORDINAL_POSITION</p>\n<p>[/code]></p>\n<p>I then used the following code to display the stored procedures in my database;</p>\n<p>[code:c#]</p>\n<h2 id=\"specificschemaspecificname\"><a href=\"#specificschemaspecificname\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>#SPECIFIC<em>SCHEMA#.#SPECIFIC</em>NAME</h2>\n<p>The parameters and data types for the #SPECIFIC<em>SCHEMA#.#SPECIFIC</em>NAME# procedure are as follows;</p>\n<ol start=\"4\">\n<li>\n<h1 id=\"parametermode-parametername-data_type\"><a href=\"#parametermode-parametername-data_type\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PARAMETER<em>MODE#, #PARAMETER</em>NAME#, #DATA_TYPE</h1>\n</li>\n</ol>\n<p>Here is the transact-sql for the #SPECIFIC<em>SCHEMA#.#SPECIFIC</em>NAME# procedure.</p>\n<div class=\"solid\"><pre>#ROUTINE_DEFINITION#</pre>  \n</div>\n[/code]>","frontmatter":{"title":"Auto Documenting SQL Server 2005 Stored Procedures","date":"17.01.2011","category":"Blog"},"timeToRead":2}},"pageContext":{"slug":"/auto-documenting-sql-server-2005-stored-procedures","prev":{"fields":{"slug":"/available-for-consulting"},"frontmatter":{"title":"Available for Consulting","category":"Blog"}},"next":{"fields":{"slug":"/apple-launches-mac-os-forge"},"frontmatter":{"title":"Apple launches Mac OS forge","category":"Blog"}}}}